<div class="row" class="row m-0 p-0">
    <div class="col-12 mt-2">            
      <div style="overflow:auto;width: 100%;">        
        <table #tabledata mat-table [dataSource]="listData" style="width: 100%;" class="table-bordered table-hover">

          <ng-container matColumnDef="select">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;"> X </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <button class="btn btn-danger" (click)="remove(i)" style="margin-left:10px">
                X
              </button>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="product" >
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 150px;">PRODUCT </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <div>
                <input #eprod matInput placeholder="Product" aria-label="Product" #inputState
                  [matAutocomplete]="stateAutoComplete" [(ngModel)]="element.product"
                  (keyup.enter)="onProdKeydown($event,i)">
                <mat-autocomplete #stateAutoComplete="matAutocomplete">
                  <mat-option *ngFor="let r of filterProducts(element.product)" [value]="r.itemname"
                    (onSelectionChange)="prodChanged($event,r,i)">
                    <span>{{r.itemname}}</span> |
                    <small>GST : {{r.gst}}</small>
                  </mat-option>
                </mat-autocomplete>
              </div>
              <div>
                <span> {{element.hsn}}</span>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef>
              <div class="row">
                  <div (click)="addRow()" title="Add More Products!">
                    <img src="assets/add.png" height="32px" width="32px" />
                  </div>
                  <div (click)="removeAll()" title="Remove All Products!">
                    <img src="assets/deleteall.png" height="32px" width="32px" />
                  </div>
                </div>
              
            </td>
          </ng-container>
          <ng-container matColumnDef="qty">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> QTY</th>
            <td mat-cell *matCellDef="let element;let i=index">
              <div class="row">
                <input #eqty matInput [(ngModel)]="element.qty" class="input_right" type="number" style="padding:5px"
                  (focusin)="methods.Empty($event)" (focusout)="methods.return($event)" (click)="methods.Empty($event)"
                  (keyup.enter)="onQtyKeydown($event,i)" />
              </div>
              <div class="row">
                <div class="col-12 text-center" style="color:gray">
                  <hr class="p-0 m-0" />
                  {{element.uom}}
                </div>
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="rate">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> BASIC RATE </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <input #erate [(ngModel)]="element.rate" type="number" (focusin)="methods.Empty($event)"
                (focusout)="methods.return($event)" (click)="methods.Empty($event)" class="input_right" matInput
                (ngModelChange)="onRateChange($event,i)" (keyup.enter)="onRateKeydown($event,i)" />
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="addon">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> ADDON</th>
            <td mat-cell *matCellDef="let element;let i=index">
              <input #etransport [(ngModel)]="element.addon" type="number" matInput
                (keyup.enter)="onAddonRateKeydown($event,i)" />
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="subtotal">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> SUB TOTAL </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <input #ediscvalue readonly="true" type="number" class="input_right" [(ngModel)]="element.subtotal"
                matInput />
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="disc">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> DISCOUNT %</th>
            <td mat-cell *matCellDef="let element;let i=index">
              <div class="row">
                <div class="col-7 col-sm-8 col-md-9 col-lg-8 col-xl-9 col-xxl-11">
                  <input #edisc [(ngModel)]="element.disc" type="number" style="padding:5px" class="input_right"
                    (focusin)="methods.methods.Empty($event)" (focusout)="methods.return($event)" (click)="methods.Empty($event)"
                    (ngModelChange)="onDiscChange($event,i)" matInput (keyup.enter)="onDiscKeydown($event,i)" />
                </div>
                <div class="col-5 col-sm-4 col-md-3 col-lg-4 col-xl-3 col-xxl-1">
                  %
                </div>
              </div>
              <hr class="p-0 m-0" />
              <div style="text-align: right;margin-right: 10px; padding: 5px;">{{element.discvalue | currency:'INR' }}
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="taxable">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> TAXABLE </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <input #ediscvalue readonly="true" type="number" class="input_right" [(ngModel)]="element.taxable"
                matInput />
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="gst">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> GST %</th>
            <td mat-cell *matCellDef="let element;let i=index">
              <div class="row">
                <div class="col-7 col-sm-8 col-md-9 col-lg-8 col-xl-9 col-xxl-11">
                  <input #etax [(ngModel)]="element.gst" type="number" (focusin)="methods.Empty($event)"
                    (focusout)="methods.return($event)" (click)="methods.Empty($event)" style="padding:5px" class="input_right"
                    matInput (ngModelChange)="onTaxKeyChange($event,i)" (focusout)="onTaxKeydown($event,i)"
                    (keyup.enter)="onTaxKeydown($event,i)" />
                </div>
                <div class="col-5 col-sm-4 col-md-3 col-lg-4 col-xl-3 col-xxl-1">
                  %
                </div>
              </div>
              <hr class="p-0 m-0" />
              <div style="text-align: right;margin-right: 10px; padding: 5px;">{{element.gstvalue | currency:'INR' }}
              </div>
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>
          <ng-container matColumnDef="amount">
            <th mat-header-cell *matHeaderCellDef style="text-align: center;min-width: 80px;"> AMOUNT </th>
            <td mat-cell *matCellDef="let element;let i=index">
              <input #eamt readonly="true" matInput type="number" class="input_right" [(ngModel)]="element.amount"
                (keyup.enter)="onAmountKeydown($event,i)" />
            </td>
            <td mat-footer-cell *matFooterCellDef></td>
          </ng-container>

          <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
          <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>
          <tr mat-footer-row *matFooterRowDef="displayedColumns"></tr>

        </table>
      </div>
    </div>
</div>  
